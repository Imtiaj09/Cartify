<header class="shop-header sticky-top" [class.shop-header-scrolled]="isHeaderScrolled">
  <div class="container-fluid px-3 px-lg-4 py-3">
    <div class="d-flex flex-column flex-lg-row align-items-lg-center gap-3 gap-lg-4">
      <a
        routerLink="/shop/home"
        class="brand-logo text-decoration-none d-inline-flex align-items-center"
        aria-label="Cartify home"
      >
        <span class="brand-green">CART</span><span class="brand-dark">IFY</span>
      </a>

      <button type="button" class="btn btn-link p-0 text-start location-chip d-inline-flex align-items-center text-decoration-none">
        <i class="bi bi-geo-alt-fill fs-4 text-success me-2" aria-hidden="true"></i>
        <span class="d-flex flex-column lh-sm">
          <small class="text-muted">Deliver to</small>
          <span class="fw-semibold text-dark">Your address</span>
        </span>
      </button>

      <form class="flex-grow-1" role="search">
        <label for="header-search" class="visually-hidden">Search products</label>
        <div class="input-group search-pill">
          <input
            id="header-search"
            type="search"
            class="form-control border-0 bg-transparent shadow-none ps-4"
            placeholder="What you're looking for"
          />
          <button class="btn search-btn fw-semibold d-inline-flex align-items-center" type="submit">
            <i class="bi bi-search me-2" aria-hidden="true"></i>
            Search
          </button>
        </div>
      </form>

      <div class="d-flex align-items-center gap-3 ms-lg-2">
        <!-- User Profile Dropdown -->
        <div class="dropdown" *ngIf="currentUser$ | async as user; else loggedOut">
          <button
            class="btn btn-link text-dark action-icon p-0 dropdown-toggle no-caret"
            type="button"
            id="userDropdown"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <img
              *ngIf="user.avatarUrl; else defaultIcon"
              [src]="user.avatarUrl"
              alt="User Avatar"
              class="rounded-circle"
              width="32"
              height="32"
            />
            <ng-template #defaultIcon>
              <i class="bi bi-person-circle fs-4" aria-hidden="true"></i>
            </ng-template>
          </button>
          <ul class="dropdown-menu dropdown-menu-end shadow-sm border-0 rounded-3" aria-labelledby="userDropdown">
            <li><h6 class="dropdown-header">Hello, {{ user.firstName }}</h6></li>
            <li><a class="dropdown-item" routerLink="/shop/profile">My Account</a></li>
            <li><a class="dropdown-item" href="#">My Orders</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><button class="dropdown-item text-danger" (click)="logout()">Logout</button></li>
          </ul>
        </div>

        <ng-template #loggedOut>
          <div class="dropdown">
             <button
              class="btn btn-link text-dark action-icon p-0 dropdown-toggle no-caret"
              type="button"
              id="guestDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-person-circle fs-4" aria-hidden="true"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end shadow-sm border-0 rounded-3" aria-labelledby="guestDropdown">
              <li><a class="dropdown-item" href="#">Sign In / Register</a></li>
            </ul>
          </div>
        </ng-template>

        <a routerLink="/shop/cart" class="btn btn-link text-dark action-icon p-0 d-inline-flex align-items-center text-decoration-none position-relative">
          <i class="bi bi-cart3 fs-4 me-1" aria-hidden="true"></i>
          <span class="fw-semibold">Cart</span>
          <span
            *ngIf="(cartTotalItems$ | async) as count"
            class="badge rounded-pill bg-danger position-absolute top-0 start-100 translate-middle"
            style="font-size: 0.65rem; padding: 0.35em 0.5em;"
          >
            {{ count }}
          </span>
        </a>
      </div>
    </div>
  </div>
</header>

<nav class="shop-nav bg-white" aria-label="Main navigation">
  <div class="container-fluid px-3 px-lg-4">
    <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-2">
      <div class="d-flex flex-wrap align-items-center py-2 nav-link-set">
        <button type="button" class="btn btn-link text-dark fw-semibold text-decoration-none px-0 d-inline-flex align-items-center">
          <i class="bi bi-list fs-5 me-2" aria-hidden="true"></i>
          Menu
        </button>
        <span class="vr mx-3 d-none d-md-inline-flex"></span>
        <a class="nav-link small-nav-link px-0 me-3" href="#">Explore</a>
        <a class="nav-link small-nav-link px-0 me-3" href="#">Deals</a>
        <a class="nav-link small-nav-link px-0" href="#">Saved</a>
      </div>

      <div class="d-flex flex-wrap align-items-center justify-content-lg-end py-2 nav-link-set right-links">
        <a
          routerLink="/shop/home"
          [routerLinkActiveOptions]="{ exact: true }"
          routerLinkActive="active-link"
          class="nav-link top-nav-link px-0 me-3 me-lg-4"
        >
          Home
        </a>
        <a routerLink="/shop/products" routerLinkActive="active-link" class="nav-link top-nav-link px-0 me-3 me-lg-4">
          Product
        </a>
        <a class="nav-link top-nav-link px-0 me-3 me-lg-4" href="#">About Us</a>
        <a class="nav-link top-nav-link px-0" href="#">Contact</a>
      </div>
    </div>
  </div>
</nav>

<main class="shop-content">
  <router-outlet></router-outlet>
</main>

<footer class="shop-footer mt-auto">
  <div class="container-fluid px-3 px-lg-4 pb-5 pt-5">
    <div class="row g-4 g-lg-5">
      <div class="col-12 col-md-6 col-xl-3 footer-col">
        <a
          routerLink="/shop/home"
          class="brand-logo text-decoration-none d-inline-flex align-items-center mb-3"
          aria-label="Cartify home"
        >
          <span class="brand-green">CART</span><span class="brand-dark">IFY</span>
        </a>
        <p class="footer-about mb-4">
          Your one-stop destination for the latest in fashion and technology.
        </p>
        <div class="d-flex align-items-center gap-2 footer-social">
          <a href="#" class="footer-social-link" aria-label="Cartify on Facebook">
            <i class="bi bi-facebook" aria-hidden="true"></i>
          </a>
          <a href="#" class="footer-social-link" aria-label="Cartify on Twitter">
            <i class="bi bi-twitter" aria-hidden="true"></i>
          </a>
          <a href="#" class="footer-social-link" aria-label="Cartify on Instagram">
            <i class="bi bi-instagram" aria-hidden="true"></i>
          </a>
          <a href="#" class="footer-social-link" aria-label="Cartify on LinkedIn">
            <i class="bi bi-linkedin" aria-hidden="true"></i>
          </a>
        </div>
      </div>

      <div class="col-12 col-md-6 col-xl-3 footer-col">
        <h2 class="h6 fw-bold footer-title mb-3">Quick Navigation</h2>
        <ul class="list-unstyled mb-0 footer-nav-list">
          <li><a routerLink="/shop/home" class="nav-link footer-nav-link top-nav-link px-0 py-1">Home</a></li>
          <li><a routerLink="/shop/products" class="nav-link footer-nav-link top-nav-link px-0 py-1">Products</a></li>
          <li><a href="#" class="nav-link footer-nav-link top-nav-link px-0 py-1">About Us</a></li>
          <li><a href="#" class="nav-link footer-nav-link top-nav-link px-0 py-1">Contact</a></li>
        </ul>
      </div>

      <div class="col-12 col-md-6 col-xl-3 footer-col">
        <h2 class="h6 fw-bold footer-title mb-3">Support &amp; Policies</h2>
        <ul class="list-unstyled mb-0 footer-nav-list">
          <li><a href="#" class="nav-link footer-nav-link small-nav-link px-0 py-1">FAQ</a></li>
          <li><a href="#" class="nav-link footer-nav-link small-nav-link px-0 py-1">Shipping Policy</a></li>
          <li><a href="#" class="nav-link footer-nav-link small-nav-link px-0 py-1">Privacy Policy</a></li>
          <li><a href="#" class="nav-link footer-nav-link small-nav-link px-0 py-1">Terms &amp; Conditions</a></li>
        </ul>
      </div>

      <div class="col-12 col-md-6 col-xl-3 footer-col">
        <h2 class="h6 fw-bold footer-title mb-3">Join our Newsletter</h2>
        <form class="footer-newsletter mb-4" novalidate>
          <label for="newsletter-email" class="visually-hidden">Email address</label>
          <div class="d-flex flex-column flex-sm-row gap-2">
            <input
              id="newsletter-email"
              type="email"
              class="form-control newsletter-input rounded-pill"
              placeholder="Enter your email"
            />
            <button type="submit" class="btn btn-success rounded-pill px-4 fw-semibold newsletter-btn">
              Subscribe
            </button>
          </div>
        </form>

        <ul class="list-unstyled mb-0 footer-contact">
          <li class="footer-contact-item">
            <i class="bi bi-geo-alt-fill" aria-hidden="true"></i>
            <span>25 Green Road, Dhaka 1205</span>
          </li>
          <li class="footer-contact-item">
            <i class="bi bi-telephone-fill" aria-hidden="true"></i>
            <a href="tel:+8801712345678">+880 17 1234 5678</a>
          </li>
          <li class="footer-contact-item">
            <i class="bi bi-envelope-fill" aria-hidden="true"></i>
            <a href="mailto:support@cartify.com">support@cartify.com</a>
          </li>
        </ul>
      </div>
    </div>

    <hr class="footer-divider my-4" />

    <div class="d-flex flex-column flex-md-row align-items-center justify-content-between gap-3">
      <p class="small mb-0 footer-copy">Â© 2026 Cartify. A. H. M. Imtiaj. All rights reserved.</p>
      <div class="d-flex align-items-center flex-wrap justify-content-center gap-2 footer-payments">
        <span class="payment-chip" aria-label="Visa">
          <i class="bi bi-credit-card-2-front me-1" aria-hidden="true"></i>
          Visa
        </span>
        <span class="payment-chip" aria-label="Mastercard">
          <i class="bi bi-credit-card me-1" aria-hidden="true"></i>
          Mastercard
        </span>
        <span class="payment-chip" aria-label="PayPal">
          <i class="bi bi-paypal me-1" aria-hidden="true"></i>
          PayPal
        </span>
      </div>
    </div>
  </div>
</footer>
